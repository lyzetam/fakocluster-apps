<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">Oura Dashboard - Health Data Visualization | My New Hugo Site</title>
<meta property="og:title" content="Oura Dashboard - Health Data Visualization | My New Hugo Site" />
<meta name="twitter:title" content="Oura Dashboard - Health Data Visualization | My New Hugo Site" />
<meta itemprop="name" content="Oura Dashboard - Health Data Visualization | My New Hugo Site" />
<meta name="application-name" content="Oura Dashboard - Health Data Visualization | My New Hugo Site" />
<meta property="og:site_name" content="" />

<meta name="description" content="Interactive health data visualization platform for Oura Ring metrics with OAuth2 authentication">
<meta itemprop="description" content="Interactive health data visualization platform for Oura Ring metrics with OAuth2 authentication" />
<meta property="og:description" content="Interactive health data visualization platform for Oura Ring metrics with OAuth2 authentication" />
<meta name="twitter:description" content="Interactive health data visualization platform for Oura Ring metrics with OAuth2 authentication" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />

  <link rel="alternate" hreflang="en" href="http://localhost:1313/pages/projects/oura-dashboard/" title="" />






<meta name="generator" content="Hugo 0.148.2">

    
    <meta property="og:url" content="http://localhost:1313/pages/projects/oura-dashboard/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="Oura Dashboard - Health Data Visualization">
  <meta property="og:description" content="Interactive health data visualization platform for Oura Ring metrics with OAuth2 authentication">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="pages">
    <meta property="article:published_time" content="2025-01-07T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-01-07T00:00:00+00:00">
    <meta property="article:tag" content="Health">
    <meta property="article:tag" content="Data Visualization">
    <meta property="article:tag" content="Streamlit">
    <meta property="article:tag" content="OAuth2">
    <meta property="article:tag" content="PostgreSQL">
    <meta property="article:tag" content="Kubernetes">


    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Oura Dashboard - Health Data Visualization">
  <meta name="twitter:description" content="Interactive health data visualization platform for Oura Ring metrics with OAuth2 authentication">


    

    <link rel="canonical" href="http://localhost:1313/pages/projects/oura-dashboard/">
    <link href="/style.min.e390ba7da26222f4dc42a349955d76dbbe44e5ce2535a43de5a70633a0a9ec3c.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="http://localhost:1313/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    
    
</head>
<body data-theme = "" class="notransition">

<script src="/js/theme.js"></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="http://localhost:1313/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title></title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/pages/about/">
                        About
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/pages/projects/">
                        Projects
                    </a>
                    
                    <ul>
                        
                        <li>
                            <a class="menu-link "
                                href="/pages/projects/oura-dashboard/">
                                Oura Dashboard
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
                
                
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">Oura Dashboard - Health Data Visualization</h1>
                
                
                
                <div class="post-meta">
                    <time datetime="2025-01-07T00:00:00&#43;00:00" itemprop="datePublished"> Jan 7, 2025 </time>
                </div>
                
            </header>
            
            <div class="page-content">
                <h1 id="oura-dashboard---health-data-visualization-platform">Oura Dashboard - Health Data Visualization Platform</h1>
<h2 id="overview">Overview</h2>
<p>Oura Dashboard is a Streamlit-based web application deployed in the Fako cluster that provides interactive visualization of health data collected from the Oura Ring. It connects to the PostgreSQL database populated by the Oura Collector service and presents comprehensive health insights through charts, graphs, and analytics. The dashboard is secured with OAuth2 authentication and provides personalized health tracking capabilities for sleep, activity, readiness, and heart rate metrics.</p>
<h2 id="key-features">Key Features</h2>
<ul>
<li><strong>Interactive Visualizations</strong>: Real-time charts and graphs using Streamlit</li>
<li><strong>Comprehensive Metrics</strong>: Sleep, activity, readiness, and HRV analytics</li>
<li><strong>OAuth2 Authentication</strong>: Secure access with OAuth2 proxy</li>
<li><strong>PostgreSQL Integration</strong>: Direct database queries for data</li>
<li><strong>Responsive Design</strong>: Mobile-friendly interface</li>
<li><strong>Health Trends</strong>: Long-term pattern analysis</li>
<li><strong>Custom Reports</strong>: Exportable health summaries</li>
<li><strong>Real-time Updates</strong>: Auto-refresh capabilities</li>
</ul>
<h2 id="architecture">Architecture</h2>
<h3 id="components">Components</h3>
<ol>
<li><strong>Streamlit App</strong>: Python-based web dashboard</li>
<li><strong>OAuth2 Proxy</strong>: Authentication layer</li>
<li><strong>Service</strong>: ClusterIP on port 8501</li>
<li><strong>Ingress</strong>: HTTPS access with authentication</li>
<li><strong>External Secrets</strong>: AWS Secrets Manager integration</li>
<li><strong>Database Connection</strong>: PostgreSQL read access</li>
</ol>
<h3 id="resource-requirements">Resource Requirements</h3>
<ul>
<li><strong>Memory</strong>: 256Mi (request), 512Mi (limit)</li>
<li><strong>CPU</strong>: 100m (request), 500m (limit)</li>
<li><strong>Storage</strong>: EmptyDir for temporary data</li>
<li><strong>Port</strong>: 8501 (Streamlit default)</li>
</ul>
<h2 id="configuration">Configuration</h2>
<h3 id="environment-settings">Environment Settings</h3>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Value</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>DATABASE_NAME</code></td>
          <td><code>app</code></td>
          <td>PostgreSQL database</td>
      </tr>
      <tr>
          <td><code>DAYS_TO_BACKFILL</code></td>
          <td><code>7</code></td>
          <td>Default data range</td>
      </tr>
      <tr>
          <td><code>LOG_LEVEL</code></td>
          <td><code>INFO</code></td>
          <td>Application logging</td>
      </tr>
      <tr>
          <td><code>API_TIMEOUT</code></td>
          <td><code>30</code></td>
          <td>Query timeout</td>
      </tr>
  </tbody>
</table>
<h3 id="oauth2-configuration">OAuth2 Configuration</h3>
<p>Protected by OAuth2 proxy for secure access:</p>
<ul>
<li>Provider: Configured in external secret</li>
<li>Cookie secret: Auto-generated</li>
<li>Email domain restrictions</li>
</ul>
<h2 id="usage">Usage</h2>
<h3 id="accessing-the-dashboard">Accessing the Dashboard</h3>
<p>External access (with authentication):</p>
<pre tabindex="0"><code>https://oura-dashboard.your-domain.com
</code></pre><p>Internal access (port forward):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl port-forward -n oura-dashboard svc/oura-dashboard 8501:8501
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Access at http://localhost:8501</span>
</span></span></code></pre></div><h3 id="dashboard-features">Dashboard Features</h3>
<ol>
<li>
<p><strong>Overview Page</strong>:</p>
<ul>
<li>Daily health summary</li>
<li>Key metrics at a glance</li>
<li>Recent trends</li>
</ul>
</li>
<li>
<p><strong>Sleep Analysis</strong>:</p>
<ul>
<li>Sleep stages breakdown</li>
<li>Sleep quality trends</li>
<li>Bedtime consistency</li>
<li>REM/Deep sleep patterns</li>
</ul>
</li>
<li>
<p><strong>Activity Tracking</strong>:</p>
<ul>
<li>Daily steps and calories</li>
<li>Activity intensity</li>
<li>Movement patterns</li>
<li>Goal achievement</li>
</ul>
</li>
<li>
<p><strong>Readiness Insights</strong>:</p>
<ul>
<li>HRV trends</li>
<li>Recovery status</li>
<li>Temperature deviation</li>
<li>Readiness contributors</li>
</ul>
</li>
<li>
<p><strong>Reports</strong>:</p>
<ul>
<li>Weekly/monthly summaries</li>
<li>Exportable data</li>
<li>Custom date ranges</li>
</ul>
</li>
</ol>
<h2 id="operations">Operations</h2>
<h3 id="health-monitoring">Health Monitoring</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Check dashboard health</span>
</span></span><span style="display:flex;"><span>kubectl get pods -n oura-dashboard
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># View logs</span>
</span></span><span style="display:flex;"><span>kubectl logs -n oura-dashboard -l app<span style="color:#f92672">=</span>oura-dashboard
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check OAuth2 proxy</span>
</span></span><span style="display:flex;"><span>kubectl logs -n oura-dashboard -l app<span style="color:#f92672">=</span>oauth2-proxy
</span></span></code></pre></div><h3 id="database-queries">Database Queries</h3>
<p>The dashboard executes various queries:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- Example: Weekly sleep average
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> 
</span></span><span style="display:flex;"><span>  DATE_TRUNC(<span style="color:#e6db74">&#39;week&#39;</span>, date) <span style="color:#66d9ef">as</span> week,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">AVG</span>(total_sleep) <span style="color:#66d9ef">as</span> avg_sleep,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">AVG</span>(deep_sleep) <span style="color:#66d9ef">as</span> avg_deep,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">AVG</span>(rem_sleep) <span style="color:#66d9ef">as</span> avg_rem
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> oura_sleep
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> date <span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CURRENT_DATE</span> <span style="color:#f92672">-</span> INTERVAL <span style="color:#e6db74">&#39;30 days&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> week;
</span></span></code></pre></div><h3 id="performance-optimization">Performance Optimization</h3>
<ol>
<li>
<p><strong>Query caching</strong>:</p>
<ul>
<li>Implements session-based caching</li>
<li>Reduces database load</li>
</ul>
</li>
<li>
<p><strong>Data aggregation</strong>:</p>
<ul>
<li>Pre-computed daily summaries</li>
<li>Efficient time-series queries</li>
</ul>
</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="dashboard-not-loading">Dashboard Not Loading</h3>
<ol>
<li><strong>Check Streamlit health</strong>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl exec -n oura-dashboard deployment/oura-dashboard -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  curl -s http://localhost:8501/_stcore/health
</span></span></code></pre></div><ol start="2">
<li><strong>Verify database connection</strong>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl exec -n oura-dashboard deployment/oura-dashboard -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  pg_isready -h postgres-cluster-rw.postgres.svc.cluster.local
</span></span></code></pre></div><h3 id="authentication-issues">Authentication Issues</h3>
<ol>
<li><strong>Check OAuth2 proxy</strong>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl logs -n oura-dashboard deployment/oauth2-proxy
</span></span></code></pre></div><ol start="2">
<li><strong>Verify cookie secret</strong>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get secret oauth2-proxy -n oura-dashboard
</span></span></code></pre></div><h3 id="data-not-displaying">Data Not Displaying</h3>
<ol>
<li><strong>Check data availability</strong>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Connect to database</span>
</span></span><span style="display:flex;"><span>kubectl exec -it -n postgres postgres-cluster-1 -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  psql -U app -c <span style="color:#e6db74">&#34;SELECT COUNT(*) FROM oura_sleep;&#34;</span>
</span></span></code></pre></div><ol start="2">
<li><strong>Verify permissions</strong>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl describe externalsecret -n oura-dashboard
</span></span></code></pre></div><h2 id="security-considerations">Security Considerations</h2>
<h3 id="authentication">Authentication</h3>
<ul>
<li>OAuth2 proxy for external access</li>
<li>Cookie-based sessions</li>
<li>Email domain restrictions</li>
<li>Secure cookie settings</li>
</ul>
<h3 id="database-access">Database Access</h3>
<ul>
<li>Read-only database user</li>
<li>Credentials from AWS Secrets</li>
<li>SSL connection enforced</li>
<li>Query timeout limits</li>
</ul>
<h3 id="best-practices">Best Practices</h3>
<ol>
<li><strong>Regular auth audits</strong>: Review access logs</li>
<li><strong>Session management</strong>: Configure timeout</li>
<li><strong>Data privacy</strong>: No PII in logs</li>
<li><strong>HTTPS only</strong>: Enforce encryption</li>
<li><strong>CORS settings</strong>: Restrict origins</li>
</ol>
<h2 id="customization">Customization</h2>
<h3 id="adding-new-visualizations">Adding New Visualizations</h3>
<p>Create custom pages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># pages/custom_analysis.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> streamlit <span style="color:#66d9ef">as</span> st
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> plotly.express <span style="color:#66d9ef">as</span> px
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">load_custom_data</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Custom query logic</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>st<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Custom Health Analysis&#34;</span>)
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> load_custom_data()
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>line(data, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;date&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;metric&#39;</span>)
</span></span><span style="display:flex;"><span>st<span style="color:#f92672">.</span>plotly_chart(fig)
</span></span></code></pre></div><h3 id="theming">Theming</h3>
<p>Configure Streamlit theme:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#75715e"># .streamlit/config.toml</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">theme</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">primaryColor</span> = <span style="color:#e6db74">&#34;#FF6B6B&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">backgroundColor</span> = <span style="color:#e6db74">&#34;#FFFFFF&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">secondaryBackgroundColor</span> = <span style="color:#e6db74">&#34;#F0F2F6&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">textColor</span> = <span style="color:#e6db74">&#34;#262730&#34;</span>
</span></span></code></pre></div><h3 id="custom-metrics">Custom Metrics</h3>
<p>Add calculated metrics:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Sleep debt calculation</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">calculate_sleep_debt</span>(df):
</span></span><span style="display:flex;"><span>    target_sleep <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span>  <span style="color:#75715e"># 8 hours in minutes</span>
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#39;sleep_debt&#39;</span>] <span style="color:#f92672">=</span> target_sleep <span style="color:#f92672">-</span> df[<span style="color:#e6db74">&#39;total_sleep&#39;</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> df[<span style="color:#e6db74">&#39;sleep_debt&#39;</span>]<span style="color:#f92672">.</span>rolling(<span style="color:#ae81ff">7</span>)<span style="color:#f92672">.</span>mean()
</span></span></code></pre></div><h2 id="monitoring">Monitoring</h2>
<h3 id="key-metrics">Key Metrics</h3>
<ul>
<li>Page load times</li>
<li>Query execution duration</li>
<li>Active user sessions</li>
<li>Error rates</li>
<li>Cache hit ratios</li>
</ul>
<h3 id="prometheus-metrics">Prometheus Metrics</h3>
<p>If enabled:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># ServiceMonitor configuration</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">job_name</span>: <span style="color:#e6db74">&#39;oura-dashboard&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">metrics_path</span>: <span style="color:#e6db74">&#39;/metrics&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">static_configs</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">targets</span>: [<span style="color:#e6db74">&#39;oura-dashboard:9090&#39;</span>]
</span></span></code></pre></div><h3 id="performance-monitoring">Performance Monitoring</h3>
<p>Track slow queries:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> logging
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">timed_query</span>(query):
</span></span><span style="display:flex;"><span>    start <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time()
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> execute_query(query)
</span></span><span style="display:flex;"><span>    duration <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time() <span style="color:#f92672">-</span> start
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> duration <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1.0</span>:
</span></span><span style="display:flex;"><span>        logging<span style="color:#f92672">.</span>warning(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Slow query: </span><span style="color:#e6db74">{</span>duration<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> result
</span></span></code></pre></div><h2 id="maintenance">Maintenance</h2>
<h3 id="regular-tasks">Regular Tasks</h3>
<ol>
<li>
<p><strong>Daily</strong>:</p>
<ul>
<li>Monitor dashboard availability</li>
<li>Check error logs</li>
<li>Verify data freshness</li>
</ul>
</li>
<li>
<p><strong>Weekly</strong>:</p>
<ul>
<li>Review usage patterns</li>
<li>Clean temporary files</li>
<li>Update visualizations</li>
</ul>
</li>
<li>
<p><strong>Monthly</strong>:</p>
<ul>
<li>Update dashboard image</li>
<li>Review OAuth2 settings</li>
<li>Performance analysis</li>
</ul>
</li>
</ol>
<h3 id="cache-management">Cache Management</h3>
<p>Clear Streamlit cache:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl exec -n oura-dashboard deployment/oura-dashboard -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  rm -rf /data/.streamlit/cache
</span></span></code></pre></div><h3 id="session-cleanup">Session Cleanup</h3>
<p>Remove old sessions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl exec -n oura-dashboard deployment/oura-dashboard -- <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  find /data/sessions -mtime +7 -delete
</span></span></code></pre></div><h2 id="advanced-features">Advanced Features</h2>
<h3 id="real-time-updates">Real-time Updates</h3>
<p>Enable auto-refresh:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Auto-refresh every 5 minutes</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> streamlit <span style="color:#66d9ef">as</span> st
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> st<span style="color:#f92672">.</span>checkbox(<span style="color:#e6db74">&#34;Auto-refresh&#34;</span>):
</span></span><span style="display:flex;"><span>    time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">300</span>)
</span></span><span style="display:flex;"><span>    st<span style="color:#f92672">.</span>experimental_rerun()
</span></span></code></pre></div><h3 id="export-functionality">Export Functionality</h3>
<p>Add data export:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Export to CSV</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">export_data</span>(df, filename):
</span></span><span style="display:flex;"><span>    csv <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>to_csv(index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>    st<span style="color:#f92672">.</span>download_button(
</span></span><span style="display:flex;"><span>        label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Download CSV&#34;</span>,
</span></span><span style="display:flex;"><span>        data<span style="color:#f92672">=</span>csv,
</span></span><span style="display:flex;"><span>        file_name<span style="color:#f92672">=</span>filename,
</span></span><span style="display:flex;"><span>        mime<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/csv&#34;</span>
</span></span><span style="display:flex;"><span>    )
</span></span></code></pre></div><h3 id="comparative-analysis">Comparative Analysis</h3>
<p>Compare periods:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Compare this week vs last week</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">compare_weeks</span>(current, previous):
</span></span><span style="display:flex;"><span>    comparison <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;sleep&#39;</span>: (current[<span style="color:#e6db74">&#39;sleep&#39;</span>]<span style="color:#f92672">.</span>mean() <span style="color:#f92672">-</span> previous[<span style="color:#e6db74">&#39;sleep&#39;</span>]<span style="color:#f92672">.</span>mean()),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;steps&#39;</span>: (current[<span style="color:#e6db74">&#39;steps&#39;</span>]<span style="color:#f92672">.</span>mean() <span style="color:#f92672">-</span> previous[<span style="color:#e6db74">&#39;steps&#39;</span>]<span style="color:#f92672">.</span>mean()),
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;readiness&#39;</span>: (current[<span style="color:#e6db74">&#39;readiness&#39;</span>]<span style="color:#f92672">.</span>mean() <span style="color:#f92672">-</span> previous[<span style="color:#e6db74">&#39;readiness&#39;</span>]<span style="color:#f92672">.</span>mean())
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> comparison
</span></span></code></pre></div><h2 id="integration-examples">Integration Examples</h2>
<h3 id="with-grafana">With Grafana</h3>
<p>Alternative visualization:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Grafana dashboard</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dashboard&#34;: </span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;title&#34;: </span><span style="color:#e6db74">&#34;Oura Health Metrics&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;panels&#34;: </span>[{
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;datasource&#34;: </span><span style="color:#e6db74">&#34;PostgreSQL&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;targets&#34;: </span>[{
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;rawSql&#34;: </span><span style="color:#e6db74">&#34;SELECT * FROM oura_sleep&#34;</span>
</span></span><span style="display:flex;"><span>      }]
</span></span><span style="display:flex;"><span>    }]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="with-jupyter">With Jupyter</h3>
<p>Advanced analysis:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Jupyter notebook integration</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> oura_dashboard <span style="color:#f92672">import</span> data_loader
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> data_loader<span style="color:#f92672">.</span>get_sleep_data()
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>plot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;date&#39;</span>, y<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;deep_sleep&#39;</span>, <span style="color:#e6db74">&#39;rem_sleep&#39;</span>])
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><h3 id="api-endpoints">API Endpoints</h3>
<p>Add REST API:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># api.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> fastapi <span style="color:#f92672">import</span> FastAPI
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> FastAPI()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.get</span>(<span style="color:#e6db74">&#34;/api/sleep/</span><span style="color:#e6db74">{date}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_sleep_data</span>(date: str):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> query_sleep_data(date)
</span></span></code></pre></div><h2 id="future-improvements">Future Improvements</h2>
<ul>
<li><input disabled="" type="checkbox"> Add machine learning predictions</li>
<li><input disabled="" type="checkbox"> Implement goal setting features</li>
<li><input disabled="" type="checkbox"> Create mobile app companion</li>
<li><input disabled="" type="checkbox"> Add social sharing capabilities</li>
<li><input disabled="" type="checkbox"> Implement data correlations</li>
<li><input disabled="" type="checkbox"> Add weather impact analysis</li>
<li><input disabled="" type="checkbox"> Create personalized recommendations</li>
<li><input disabled="" type="checkbox"> Add voice interface</li>
<li><input disabled="" type="checkbox"> Implement notifications system</li>
<li><input disabled="" type="checkbox"> Create API for external integrations</li>
</ul>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
</div>
    <small class="footer_copyright">
        © 2025 .
        
    </small>
</footer>







    
    <script async src="http://localhost:1313/js/main.js" ></script>

    

</body>
</html>
